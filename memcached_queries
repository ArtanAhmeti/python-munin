#!/usr/bin/env python

import os
import socket
from munin.memcached import MuninMemcachedPlugin

class MuninMemcachedQueriesPlugin(MuninMemcachedPlugin):
    graph_title = "Memcached query stats"
    graph_args = "--base 1000"
    graph_vlabel = "queries"
    graph_info = "get/set stats"
    fields = (
        ('cmd_get', dict(
            label = "Gets",
            info = "Gets",
            type = "DERIVE",
            min = "0",
        )),
        ('cmd_set', dict(
            label = "Sets",
            info = "Sets",
            type = "DERIVE",
            min = "0",
        )),
        ('get_hits', dict(
            label = "Get hits",
            info = "Get hits",
            type = "DERIVE",
            min = "0",
        )),
        ('get_misses', dict(
            label = "Get misses",
            info = "Get misses",
            type = "DERIVE",
            min = "0",
        )),
        ('evictions', dict(
            label = "Evictions",
            info = "Evictions",
            type = "DERIVE",
            min = "0",
        )),
    )

if __name__ == "__main__":
    MuninMemcachedQueriesPlugin().run()
